<div id="members_table">
  <div class='chorus-box'>
    <div class='box-header'>
      <h3 class='box-title'>Manage Team Memberships</h3>
      <p>People added will immediately have all the permissions and access available to this team. Poeple removed will no longer have any of the roles, abilities and access granted to the team.</p>
    </div><!-- /.box-header -->

    <%= form_for @team , url: admin.update_memberships_team_path, :method=> :put, :remote => true do |f| %>

    <div class='box-body'>
      <div class="row">
        <div class="dual-list list-left col-md-6">
          <div class="well">
            <div class="row">
              <div class="col-md-10">
                <!-- <h4>Available People&nbsp;(<#%= @available_members.count %>)</h4> -->
                <h4>Available People</h4>
                <div class="input-group">
                  <span class="input-group-addon glyphicon glyphicon-search"></span>
                  <input type="text" name="SearchDualList" class="form-control" placeholder="search" />
                </div>
              </div>
              <div class="col-md-2" style="margin-top: 38px;">
                <div class="btn-group">
                  <a href="javascript:void(0);" onclick="transfer_all_items('available_scopes', 'current_scopes');" id="add_all_members"><i class="fa fa-lg fa-plus-circle add-list-item"></i></a>&nbsp;<span>All</span>
                </div>
              </div>
            </div>
            <ul class="list-group" id="available_members" style="max-height:400px;overflow-y:scroll;overflow: -moz-scrollbars-vertical;">
              <% @available_members.each do |member |%>
                  <li class="list-group-item" id="member_<%= member.id %>">
                    <ul class="list-inline member-list">
                      <li class="avatar">
                        <%= image_tag("user4-128x128.jpg", :height => 32) %>
                      </li>
                      <li class="fullname">
                        <span data-toggle="tooltip" data-placement="top" title="<%= member.title %>"><%= member.first_name %>&nbsp;<%= member.last_name %></span>
                      </li>
                      <li class="username">
                        <%= member.username %>
                      </li>
                      <li class="action">
                        <a href="javascript:void(0);" onclick="transfer_item('member_<%= member.id %>', '.list-right ul#current_members');"><i class="fa fa-lg fa-plus-circle add-list-item"></i></a>
                      </li>
                    </ul>
                  </li>
              <%end%>
            </ul>
          </div>
        </div>
        <div class="dual-list list-right col-md-6">
          <div class="well">
            <div class="row">
              <div class="col-md-10">
                <!-- <h4>Team Members&nbsp;(<#%= @team_members.count %>)</h4> -->
                <h4>Team Members</h4>
                <div class="input-group">
                  <input type="text" name="SearchDualList" class="form-control" placeholder="search" />
                  <span class="input-group-addon glyphicon glyphicon-search"></span>
                </div>
              </div>
              <div class="col-md-2" style="margin-top: 38px;">
                <div class="btn-group">
                  <a href="#deleteTeamMembers" data-toggle="modal" id="remove_all_members"><i class="fa fa-lg fa-times-circle remove-list-item"></i>&nbsp;<span>All</span></a>
                </div>
              </div>
            </div>
            <ul class="list-group"  id="current_members" style="max-height:400px;overflow-y:scroll;overflow: -moz-scrollbars-vertical;">
              <% @team_members.each do |member |%>
                  <li class="list-group-item" id="member_<%= member.id %>">
                    <ul class="list-inline member-list">
                      <li class="avatar">
                        <%= image_tag("user4-128x128.jpg", :height => 32) %>
                      </li>
                      <li class="fullname">
                        <%= member.first_name %>&nbsp;<%= member.last_name %>
                      </li>
                      <li class="username">
                        <%= member.username %>
                      </li>
                      <li class="action">
                        <a href="#" onclick="transfer_item('member_<%= member.id %>', '.list-left ul#available_members');"><i class="fa  fa-lg fa-times-circle remove-list-item"></i></a>
                      </li>
                    </ul>
                  </li>
              <%end%>
            </ul>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <%= f.submit "Save" , class: "btn btn-primary" %>
          <a class="modalish cancel">Cancel</a>
        </div>
      </div>
    </div><!-- /.box-body -->
    <% end %>
  </div>
</div>
<div id="modalBox"></div>
<!-- Modal -->
<div id="deleteTeamMembers" class="modal" tabindex="-1" role="dialog"  aria-labelledby="myModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-center">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-body">
        <div>
          <i class="fa fa-2x fa-exclamation-triangle"  style="color:darkorange;">&nbsp;&nbsp;</i><span>Are you sure you want to remove everyone from this team?</span>
          <br/><br/>
          <p>When they are removed from the team, all of these accounts will no longer have the roles and access available to this team.</p>
          <br/>
          <p>No other changes will be made to this accounts.</p>
          <br/>
          <p>Are you sure you want to continue?</p>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="modalish cancel" data-dismiss="modal">Cancel</button>
        <a  href="#deleteTeamConfirm" data-toggle="modal"  class="btn btn-primary"  data-dismiss="modal">Remove All</a>
      </div>
    </div>

  </div>
</div>


<script type="application/javascript">

  /*
  $( document ).ready(function() {

    $(function () {

      $('body').on('click', '.list-group .list-group-item', function () {
        $(this).toggleClass('active');
      });

      $('.list-arrows .btn').click(function () {
        var $button = $(this), actives = '';
        if ($button.hasClass('move-left')) {
          actives = $('.list-right ul li.active');
          actives.clone().appendTo('.list-left ul');
          actives.remove();
        } else if ($button.hasClass('move-right')) {
          actives = $('.list-left ul li.active');
          actives.clone().appendTo('.list-right ul');
          actives.remove();
        }
      });
      $('.dual-list .selector').click(function () {
        var $checkBox = $(this);
        if (!$checkBox.hasClass('selected')) {
          $checkBox.addClass('selected').closest('.well').find('ul li:not(.active)').addClass('active');
          $checkBox.children('i').removeClass('glyphicon-unchecked').addClass('glyphicon-check');
        } else {
          $checkBox.removeClass('selected').closest('.well').find('ul li.active').removeClass('active');
          $checkBox.children('i').removeClass('glyphicon-check').addClass('glyphicon-unchecked');
        }
      });
      $('[name="SearchDualList"]').keyup(function (e) {
        var code = e.keyCode || e.which;
        if (code == '9') return;
        if (code == '27') $(this).val(null);
        var $rows = $(this).closest('.dual-list').find('.list-group li');
        var val = $.trim($(this).val()).replace(/ +/g, ' ').toLowerCase();
        $rows.show().filter(function () {
          var text = $(this).text().replace(/\s+/g, ' ').toLowerCase();
          return !~text.indexOf(val);
        }).hide();
      });

    });


  });
*/

</script>